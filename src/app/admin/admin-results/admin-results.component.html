<div id="userResults">
  <h1 class="heading">User Results</h1>
<div class="dropdown-container">
    <div class="myDiv1">
        <select class="form-select" (change)="searchExam()">
          <option select="" value="none">Search By Exam</option>
          <option *ngFor="let exam of exams" [value]="exam">{{exam}}</option>
        </select>
      </div>
      
    <div class="myDiv2">
      <select class="form-select" (change)=" searchPassFail()">
        <option select="" value="none">Pass / Fail</option>
        <option value="Pass">Pass</option>
        <option value="Fail">Fail</option>
      </select>
    </div>
    <div class="myDiv3">
      <select class="form-select" (change)="searchCategory()">
        <option select="" value="none">Search By Category</option>
          <option *ngFor="let category of categories" [value]="category">{{category}}</option>
      </select>
    </div>
 
  <div class="main">
    <div class="form-group has-search">
      <span class="fa fa-search form-control-feedback"></span>
      <input type="text" class="form-control" placeholder="Search By Name" [(ngModel)]="fullName" (ngModelChange)="search()" style="text-align: center; width: 250px;">
    </div>
    </div>
</div>

<div class="table-container">
    <table class="table table-striped table-bordered">
        
        <thead>
          <tr>
            <tr>
                <th (click)="sort('userId')">User ID &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('fullName')">Full Name &nbsp;<i class="fa fa-sort" ></i></th>
                <th  (click)="sort('email')">Email&nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('examName ')">Exam &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('categoryName')">Category &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('examTotalQuestions')">Total Questions &nbsp;<i class="fa fa-sort" ></i></th>

                <th (click)="sort('attemptedQuestions')">Attempted Questions &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('notAttemptedQuestions')">Not Attempted Questions &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('correctAnswers')">Correct Answers &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('wrongAnswers')">Wrong Answers &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('totalMarksObtained')">Total Marks Obtained &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('examTotal')">Exam Total &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('percentageObtained')">Percentage Obtained &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('passPercentage')">Pass Percentage &nbsp;<i class="fa fa-sort" ></i></th>
                <th style="width: 10px;" (click)="sort('passorFail')">Pass/Fail &nbsp;<i class="fa fa-sort" ></i></th>
                <th (click)="sort('attemptedAt')">AttemptedAt &nbsp;<i class="fa fa-sort" ></i></th>
                <th>Answer Sheet</th>
            </tr>

        </thead>
       
        <tbody>
          
          <tr *ngFor="let result of userResults | paginate:{ itemsPerPage: 5, currentPage: P } | orderBy:key:reverse">

            <td>{{ result.userId }}</td>
            <td>{{ result.fullName }}</td>
            <td >{{ result.email }}</td>
            <td>{{ result.examName }}</td>
            <td>{{ result.categoryName }}</td>
            <td>{{ result.examTotalQuestions}}</td>
            <td>{{ result.attemptedQuestions }}</td>
            <td>{{ result.notAttemptedQuestions }}</td>
            <td>{{ result.correctAnswers }}</td>
            <td>{{ result.wrongAnswers }}</td>
            <td>{{ result.totalMarksObtained }}</td>
            <td>{{ result.examTotal }}</td>
            <td>{{ result.percentageObtained }} %</td>
            <td>{{ result.passPercentage }} %</td>
            <td [ngClass]="result.passorFail" class="fw-bold fs-6">{{ result.passorFail }}</td>
            <td>{{ result.attemptedAt }}</td>
            <td><button class="btn review" (click)="AnswerSheet(result.testId)">Review</button></td>

          </tr>
      </table>  
    </div>
    <div class="mt-4">
      <pagination-controls  (pageChange)="P = $event"></pagination-controls>
    </div>
  </div>